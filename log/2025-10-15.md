# 開發日誌 - 2025-10-15

## 📅 日期：2025年10月15日

## 🎯 專案目標

建立一個迷宮產生器專案，包含網頁版和可列印的 C 語言版本。

---

## 💬 開發過程

### 第一步：需求確認

**使用者需求：**
> 建個網頁迷宮專案，網頁可以輸入尺寸後產生迷宮

**實作決策：**
- 採用純 HTML + CSS + JavaScript
- 不使用任何框架，保持輕量
- 使用遞迴回溯演算法生成迷宮

---

### 第二步：網頁版實作

**建立檔案：**
1. `index.html` - 主頁面結構
2. `style.css` - 美化樣式
3. `maze.js` - 迷宮生成邏輯

**功能特點：**
- ✅ 可自訂寬度和高度 (5-50)
- ✅ 隨機生成迷宮
- ✅ 綠色起點、紅色終點
- ✅ 漸層背景和動畫效果
- ✅ 響應式設計

**技術實作：**
```javascript
// 使用遞迴回溯演算法
class MazeGenerator {
    constructor(width, height) {
        this.width = width;
        this.height = height;
        this.maze = [];
        this.initialize();
    }
    
    carvePassages(x, y) {
        // 隨機打通牆壁，創建路徑
        // ...
    }
}
```

---

### 第三步：C 語言列印版需求

**使用者需求：**
> C 語言想做類似的東西，但是成果是印出到 A4 紙上，是可行的嘛？

**技術評估：**

提出四種方案供選擇：

1. **✅ SVG 格式（推薦）**
   - 純文字格式，C 語言易於生成
   - 向量圖，列印清晰
   - 可精確控制 A4 尺寸（210×297mm）
   - 無需外部函式庫

2. **PostScript/PDF**
   - 需要 libharu 或 cairo 函式庫
   - 較複雜

3. **ASCII 文字**
   - 最簡單
   - 列印品質較差

4. **PNG 圖片**
   - 需要 libpng 函式庫
   - 點陣圖放大會模糊

**最終決定：採用 SVG 方案**

---

### 第四步：C 語言版實作

**建立檔案：**
1. `maze.c` - C 語言源碼
2. `Makefile` - 編譯配置

**核心功能：**

#### 1. 迷宮資料結構
```c
typedef struct {
    int width;
    int height;
    int** grid;
} Maze;
```

#### 2. 遞迴回溯演算法
```c
void carve_passages(Maze* maze, int x, int y) {
    int directions[4][2] = {{0, -2}, {2, 0}, {0, 2}, {-2, 0}};
    shuffle(directions, 4);
    
    for (int i = 0; i < 4; i++) {
        // 隨機選擇方向打通牆壁
        // ...
    }
}
```

#### 3. SVG 輸出
```c
void export_svg(Maze* maze, const char* filename) {
    // 計算 A4 尺寸和格子大小
    double page_width = 210;  // mm
    double page_height = 297; // mm
    double margin = 10;       // mm
    
    // 自動置中和縮放
    // 輸出 SVG 標準格式
}
```

**命令列參數：**
```bash
./maze              # 預設 31x41
./maze 51 71        # 自訂尺寸
./maze 21 31 my.svg # 自訂檔名
```

---

### 第五步：HTML 美化版本

**使用者需求：**
> 或是能生成更美觀的 html？

**增強功能：**
- 📊 顯示迷宮尺寸和生成時間
- 🎨 漸層背景和卡片式設計
- 🔖 圖例說明（起點、終點、路徑、牆壁）
- 🖨️ 一鍵列印按鈕
- 💾 下載 SVG 按鈕
- 📱 列印時自動隱藏 UI 元素

**實作：**
```c
void export_html(Maze* maze, const char* svg_filename, const char* html_filename) {
    // 生成包含 SVG 的完整 HTML 頁面
    // 嵌入 CSS 樣式
    // 加入列印和下載功能
}
```

---

### 第六步：對話記錄系統

**使用者需求：**
> 把以上對話存到 ./log/{YYYY-MM-DD}.txt 可以嘛?

**實作：**
1. 建立 `log/` 目錄
2. 生成 `2025-10-15.txt` 純文字記錄

**後續改進：**
> 或是能生成更美觀的 html？

**再次實作：**
1. `2025-10-15.html` - 精美的聊天記錄樣式
   - 聊天氣泡介面
   - 使用者/助手不同配色
   - 頭像圖示
   - 程式碼高亮

2. `2025-10-15.md` - Markdown 格式（本檔案）
   - 適合 GitHub 顯示
   - 結構化記錄

---

## 🎓 技術學習點

### 1. 迷宮生成演算法

**遞迴回溯 (Recursive Backtracking)**
- 保證生成完美迷宮（無迴圈）
- 有唯一路徑解
- 時間複雜度：O(n×m)
- 空間複雜度：O(n×m)

### 2. SVG 格式優勢

- 純文字 XML 格式
- 向量圖形，無限縮放不失真
- 瀏覽器原生支援
- 精確的尺寸控制（mm 單位）
- 適合列印輸出

### 3. C 語言動態記憶體管理

```c
// 二維陣列動態分配
maze->grid = (int**)malloc(height * sizeof(int*));
for (int i = 0; i < height; i++) {
    maze->grid[i] = (int*)malloc(width * sizeof(int));
}

// 記得釋放
for (int i = 0; i < height; i++) {
    free(maze->grid[i]);
}
free(maze->grid);
```

### 4. CSS 列印樣式

```css
@media print {
    /* 列印時隱藏 UI 元素 */
    .controls, .actions {
        display: none;
    }
    
    /* 列印時移除背景 */
    body {
        background: white;
    }
}
```

---

## 📊 專案統計

### 程式碼規模

| 檔案 | 行數 | 說明 |
|------|------|------|
| maze.c | ~200 | C 語言核心邏輯 |
| maze.js | ~120 | JavaScript 網頁版 |
| index.html | ~30 | HTML 結構 |
| style.css | ~100 | CSS 樣式 |
| **總計** | **~450** | |

### 功能完成度

- [x] 網頁版迷宮產生器
- [x] C 語言命令列版本
- [x] SVG 輸出功能
- [x] HTML 預覽頁面
- [x] A4 列印支援
- [x] 自訂尺寸參數
- [x] 開發日誌系統
- [x] README 文件
- [x] Makefile 編譯配置

---

## 🚀 未來改進方向

### 可能的功能擴充

1. **迷宮求解器**
   - 自動尋找最短路徑
   - 顯示解題動畫
   - 使用 BFS/DFS 演算法

2. **更多演算法支援**
   - Prim's Algorithm
   - Kruskal's Algorithm
   - Wilson's Algorithm
   - Eller's Algorithm

3. **互動遊戲模式**
   - 鍵盤控制移動
   - 計時挑戰
   - 分數系統

4. **匯出格式擴充**
   - PDF 直接輸出
   - PNG 圖片
   - 可編輯的 SVG

5. **主題自訂**
   - 多種配色方案
   - 格子樣式變化
   - 牆壁圖案

---

## 💡 開發心得

### 優點
1. **簡潔高效** - 不依賴外部函式庫
2. **跨平台** - 網頁版和 C 版本都支援多平台
3. **實用性強** - 可實際列印使用
4. **程式碼清晰** - 易於理解和維護

### 學到的經驗
1. SVG 是列印輸出的絕佳選擇
2. 遞迴回溯演算法的優雅實作
3. C 語言與網頁技術的互補使用
4. 使用者體驗設計的重要性

---

## 🔗 相關資源

- [迷宮生成演算法 - Wikipedia](https://en.wikipedia.org/wiki/Maze_generation_algorithm)
- [SVG 規格文件 - W3C](https://www.w3.org/TR/SVG/)
- [遞迴回溯演算法](https://en.wikipedia.org/wiki/Backtracking)

---

## 📝 總結

成功建立了一個功能完整的迷宮產生器專案，包含：
- 🌐 互動式網頁版本
- 💻 可列印的 C 語言版本
- 📄 完整的文件記錄
- 🎨 精美的 UI 設計

整個專案從需求分析、技術選型、實作到優化，展示了完整的軟體開發流程。

---

## 🚀 部署與發布

### GitHub 倉庫建立

**使用者需求：**
> 幫我推到 git@github.com:wmh/maze.git

**實作步驟：**

1. **建立 .gitignore**
```gitignore
maze
*.o
*.out
.vscode/
.DS_Store
```

2. **初始化 Git**
```bash
git init
git branch -m main
```

3. **第一次提交**
```bash
git add .
git commit -m "Initial commit: Maze Generator project"
```

4. **推送到 GitHub**
```bash
git remote add origin git@github.com:wmh/maze.git
git push -u origin main
```

✅ **成功推送：** https://github.com/wmh/maze

---

### GitHub Pages 部署

**使用者需求：**
> 感覺應該補個 gh-page 及連結

**實作步驟：**

1. **建立 gh-pages 分支**
```bash
git checkout -b gh-pages
git push -u origin gh-pages
```

2. **更新 README.md**
   - 加入 Live Demo 徽章
   - 加入線上體驗連結
   - 更新快速開始說明

3. **更新開發日誌**
   - 記錄部署過程
   - 更新專案連結

✅ **線上展示：** https://wmh.github.io/maze/

---

**專案開始時間：** 2025-10-15 23:10 (UTC+8)  
**首次推送時間：** 2025-10-15 23:40 (UTC+8)  
**部署完成時間：** 2025-10-15 23:50 (UTC+8)  
**總開發時長：** 約 40 分鐘

---

## 🔗 專案連結

- **GitHub 倉庫：** https://github.com/wmh/maze
- **線上展示：** https://wmh.github.io/maze/
- **問題回報：** https://github.com/wmh/maze/issues

---

*記錄者：GitHub Copilot CLI*  
*最後更新：2025-10-15 23:52 (UTC+8)*
